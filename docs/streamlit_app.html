---

title: Streamlit app


keywords: fastai
sidebar: home_sidebar



nb_path: "09_streamlit_app.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 09_streamlit_app.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>2022-03-02 20:30:16.178 
  <span class="ansi-yellow-intense-fg ansi-bold">Warning:</span> to view this Streamlit app on a browser, run it with the following
  command:

    streamlit run /Users/warrenkrettek/Documents/projects/memery/lib/python3.8/site-packages/ipykernel_launcher.py [ARGUMENTS]
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Streamlit is a more convenient way to activate a quick user-facing GUI than Voila was, especially because of Voila having conflicting dependencies with nbdev.</p>
<p>However, Streamlit wants a <code>.py</code> file instead of a notebook for development. This is kind of annoying, because to get the hot-reload effect from Streamlit we have to develop outside the notebook, but to maintain documentation (and compile with everything else) we have to keep the main source of truth right here. Perhaps a solution will present itself later; meanwhile, I have been using a scratch file <code>streamlit-app.py</code> for development and then copied it back here.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This is a workaround for the query_flow printing to stdout. Maybe it should be handled natively in Streamlit?</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="st_redirect" class="doc_header"><code>st_redirect</code><a href="https://github.com/deepfates/memery/tree/main/memery/streamlit_app.py#L21" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>st_redirect</code>(<strong><code>src</code></strong>, <strong><code>dst</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="st_stdout" class="doc_header"><code>st_stdout</code><a href="https://github.com/deepfates/memery/tree/main/memery/streamlit_app.py#L43" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>st_stdout</code>(<strong><code>dst</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="st_stderr" class="doc_header"><code>st_stderr</code><a href="https://github.com/deepfates/memery/tree/main/memery/streamlit_app.py#L49" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>st_stderr</code>(<strong><code>dst</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Trying to make good use of streamlit's caching service here; if the search query and folder are the same as a previous search, it will serve the cached version. Might present some breakage points though, yet to see.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="send_image_query" class="doc_header"><code>send_image_query</code><a href="https://github.com/deepfates/memery/tree/main/memery/streamlit_app.py#L55" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>send_image_query</code>(<strong><code>path</code></strong>, <strong><code>text_query</code></strong>, <strong><code>image_query</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="send_text_query" class="doc_header"><code>send_text_query</code><a href="https://github.com/deepfates/memery/tree/main/memery/streamlit_app.py#L60" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>send_text_query</code>(<strong><code>path</code></strong>, <strong><code>text_query</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This is the sidebar content containing:\
-Directory input\
-Root directory info\
-Text query input\
-Image query input\
-Logging output</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>2021-06-19 21:10:02.837 
  <span class="ansi-yellow-intense-fg ansi-bold">Warning:</span> to view this Streamlit app on a browser, run it with the following
  command:

    streamlit run /home/mage/.local/lib/python3.7/site-packages/ipykernel_launcher.py [ARGUMENTS]
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The image grid parameters</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>And the main event loop, triggered every time the query parameters change.</p>
<p>This doesn't really work in Jupyter at all. Hope it does once it's compiled.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>
 

